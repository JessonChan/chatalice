package llm

import (
	"chatalice/store"
	"fmt"
	"os"
	"testing"
)

var model = store.Model{
	ModelName: "claude-3-5-sonnet-20240620",
	Key:       os.Getenv("OPENAI_API_KEY"),
	BaseURL:   os.Getenv("OPENAI_API_BASE_URL"),
}

func TestTitle(t *testing.T) {
	title := Title(model, "hello world")
	t.Log(title)
}

func TestWithPic(t *testing.T) {
	str := " "
	Stream(model, store.Chat{
		SystemPrompt: `You are a helpful assistant. You can help me by answering my questions. You can also ask me questions.`,
	}, nil, UserInput{
		Content: "描述一下这个图片",
		Images:  []string{`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAsCAMAAACZpYwBAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAMAUExURQAAAP////////////////////////X//////////v///////////v///////9qbvvz8+////////////////////////////////////////75Tjv///////////////////////////////v/+/v/////////////+/chqnv///1paWv/////9/v///////x2J0////zEvLv///0hJSfn5+f////Lt1////9ve4AYGBsbDv9jW1KDR8f///9zt+bLU6f////r39sNcldeSuODCoUZGRg0aJIVZbspzpCgoKHFxceXXnpi/3b1+mAAjRW+87EZmjvDV5ea60teSuO/V5Orq6u/pyD4+PicnJ4eHh2FhYS4nE2d+lQA0Xh5/yyWV5KdbhP///79SjwqAz////8SkIf///wiAz/jt8wECAsBTkNWMtfv58/v2+cFWksJZlPDX5fr36wd9zc12p/36/Nyfwfz7+AsLDO7R4vrx9sNelsdnnctxo7udH9iWu8VjmtGDr+3N38ltoPXj7eCqyO/nw7GVHPfz4tS+YvXg63ZmDI55FGxeCerG2sGjIPbw2uKxzMWoKt6mxffq8dK4Ts99qhcWFqeNG2FUBuW50teRuOPUlOfaot3LgOrfsNG6WOi/1tOHsMyxQvHb5vPy6/Ht5H3B7ZuZmAyE1PLrzcmtNtfCaPbm7+3ju5+HGYZzE7i0loN1Mc3LysTk+fLc6YBtEAqK45iQX1aq5PX7/vT19CQkI/+22zyb3NjEcCUbDJiBFd/PjNrHdlNUVIt/PwgSHLe3t5pne6OOOgVCbt7czdbUw7GrguXm5cKqRMbAqnRpIaSorNvx/iuT2bidNH59fdTMpzs9QWdZGuj3/ruzpggyVwhusQp5w+PYtci8gb+tW6mdYKiie2tqagQfMODb1HhNXYKFhxorM/rbYUI0E9PEhQtakAdqrv/D62JBTUw0L1pLHgFcwR+a792Zs3d3d66dTJSGigJ10JLa/2W58PWiw+KQsYFzd/LI4sWMUU0AAABidFJOUwAMKzoJ8vYBBP7vMouQ3/5CEHH66BiDG0imFP6iJJW/H2W6f9F4nF7N+U/+2LdU1P7F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`},
	}, func(seg string) {
		str += seg
	})
	fmt.Println(str)
}
